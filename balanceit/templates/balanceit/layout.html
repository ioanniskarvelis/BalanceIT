{% load static %}

<!DOCTYPE html>
<html class='h-full'>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="{% static 'css/styles.css' %}" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700,900&display=swap" rel="stylesheet">
        <link href="https://unpkg.com/flowbite@1.4.1/dist/flowbite.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/apexcharts" rel="stylesheet">

        <title>{% block title %}Home{% endblock %}</title>
    </head>
    <body class="h-full flex flex-col justify-between bg-gray-100 font-montserrat">

        <header class="flex flex-row items-center justify-end flex-wrap">
            <div class="container mx-auto px-6 sm:px-12 flex items-center justify-between mt-5 relative">
                <a href="{% url 'home' %}">
                <div class="font-black text-blue-900 text-2xl flex items-start">
                    BalanceIt<span class="w-3 h-3 rounded-full bg-purple-600 ml-2"></span>
                </div>
                </a>
                <div class="flex items-center">
                    <nav class="text-purple-900 text-lg hidden lg:flex items-center">
                        <a href="{% url 'home' %}" class="py-2 px-8 flex hover:text-purple-700">
                            Home
                        </a>
                        <a href="{% url 'analyze' %}" class="py-2 px-8 flex hover:text-purple-700">
                            Analyze
                        </a>
                        {% if user.is_authenticated %}
                        <a href="{% url 'classify' %}" class="py-2 px-8 flex hover:text-purple-700">
                            Classify
                        </a>
                        <a href="{% url 'contact' %}" class="py-2 px-8 flex hover:text-purple-700">
                            Contact us
                        </a>
                        {% else %}
                        <a href="{% url 'contact' %}" class="py-2 px-8 flex hover:text-purple-700">
                            Contact us
                        </a>
                        <a href="{% url 'login' %}" class="py-2 px-8 flex hover:text-purple-700">
                            Login / Sign up
                        </a>
                        {% endif %}
                    </nav>
                    {% if user.is_authenticated %}
                    <div class="relative">
                        <button id="dropdownClickButton" data-dropdown-toggle="dropdownClick" data-dropdown-trigger="{hover|click}" class="flex items-center focus:inline-flex text-sm bg-blue-900 rounded-full md:me-0 focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600 p-2" type="button">
                            <span class="sr-only">Open user menu</span>
                            <svg fill="white" height="20px" width="20px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                viewBox="0 0 512 512" xml:space="preserve">
                            <g>
                                <g>
                                    <circle cx="256" cy="114.526" r="114.526"/>
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path d="M256,256c-111.619,0-202.105,90.487-202.105,202.105c0,29.765,24.13,53.895,53.895,53.895h296.421
                                        c29.765,0,53.895-24.13,53.895-53.895C458.105,346.487,367.619,256,256,256z"/>
                                </g>
                            </g>
                            </svg>
                        </button>
                        <!-- Dropdown menu -->
                        <div id="dropdownClick" class="hidden absolute right-0 mt-2 bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600">
                            <div class="px-4 py-3 text-sm text-gray-900 dark:text-white">
                                <div>{{ user.first_name }} {{ user.last_name }}</div>
                                <div class="font-medium truncate">{{ user.email }}</div>
                            </div>
                            <ul class="py-2 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownClickButton">
                                <li>
                                    <a href="{% url 'my_datasets' %}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">My datasets</a>
                                </li>
                                <li>
                                    <a href="{% url 'my_classifications' %}" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">My classifications</a>
                                </li>
                            </ul>
                            <div class="py-2">
                                <a href="{% url 'logout' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">Sign out</a>
                            </div>
                        </div>
                        <script>
                            const dropdownClick = document.getElementById('dropdownClick');
                            const dropdownClickButton = document.getElementById('dropdownClickButton');
                            if (dropdownClickButton) {
                                dropdownClickButton.addEventListener('click', () => {
                                    dropdownClick.classList.toggle('hidden');
                                });
                            }
                        </script>
                    </div>
                    {% endif %}  
                </div>
            </div>
        </header>
        {% block content %}
        {% endblock %}
    </body>
</html>
